<%- include('header.ejs') %>
    <h1>This is your <b>HOME</b> page</h1>
    <div class="center">
        <button id="dataGenBtn">Click me to genrate Dummy Data</button>
    </div>
    </body>
    <script>

        let cooldown = false;
        async function getData() {
                const url = "/genrate";
                try {
                    const response = await fetch(url);
                    if (!response.ok) {
                        throw new Error(`Response status: ${response.status}`);
                    }

                    const result = await response.text();
                    console.log(result);
                    console.log("doing this")
                    document.querySelector(".center").insertAdjacentHTML("beforeend", "<p>Added data sucesfully</p>")
                    cooldown = true
                    setTimeout(()=>{
                        document.querySelector(".center > p").remove()
                    }, 1000)
                    setTimeout(()=>{
                        console.log("can click now")
                        document.querySelector(".center > p").remove()
                        cooldown=false
                    }, 10*1000)
                } catch (error) {
                    console.error(error.message);
                }
            }
        dataGenBtn.addEventListener("click", () => {
            if(document.querySelector(".center > p"))
        {
            document.querySelector(".center > p").remove()
        }
        if (cooldown) {
            document.querySelector(".center").insertAdjacentHTML("beforeend", "<p>wait some time</p>")
        }
        else{
            getData()
        }

        
        })
    </script>

    </html>